Тестовий план для системи бібліотеки магічних артефактів
---

## Аналіз системи та ідентифікація потенційних точок відмови при високому навантаженні
### Потенційні точки відмови:
1. **База даних**:
    - **Точка відмови**: Велика кількість одночасних запитів до бази даних (наприклад, одночасна реєстрація багатьох користувачів або редагування артефактів) може викликати **вузькі місця** у виконанні транзакцій.
    - **Умови відмови**:
        - Блокування транзакцій через велику кількість даних або одночасний доступ до тих самих записів.
        - Вичерпання пулу підключень до бази даних.
        - Тайм-аути через перевантаження бази даних.
    - **Наслідки**: Нездатність системи завершити транзакції, затримки при збереженні даних або невдалі спроби комітів.
2. **Система транзакцій**:
    - **Точка відмови**: Високий обсяг одночасних фінансових операцій або змін артефактів може призвести до колізій транзакцій або складнощів у обробці великих потоків даних.
    - **Умови відмови**:
        - Неправильне завершення транзакцій або "зависання" через великі черги.
        - Невдалі транзакції через перевантаження бази даних.
    - **Наслідки**: Невірні оновлення даних артефактів або невдалі операції редагування.
3. **Зовнішні API**:
    - **Точка відмови**: При великій кількості запитів до зовнішніх API для отримання інформації можуть виникати проблеми з доступністю або перевищенням лімітів запитів.
    - **Умови відмови**:
        - Перевищення лімітів запитів.
        - Довгий час відповіді від API через перевантаження.
    - **Наслідки**: Немає оновлених даних, що може призвести до неможливості проведення транзакцій.
4. **Пул підключень та HTTP-запити**:
    - **Точка відмови**: Велика кількість одночасних запитів (наприклад, одночасне редагування артефактів або отримання даних) може вичерпати пул підключень до бази даних або зовнішніх сервісів.
    - **Умови відмови**:
        - Перевищення кількості одночасних підключень до бази даних або зовнішніх API.
    - **Наслідки**: Нездатність обробити нові запити, сповільнення роботи системи або її повний збій.
---

## План тестування системи при навантаженні
### 1. **Тестування навантаженням**:
- **Мета**: Перевірити, як система поводиться при зростаючій кількості одночасних користувачів і запитів.
- **Тест**:
    - Використати інструменти на зразок **Apache JMeter**, **Locust** для симуляції великої кількості одночасних запитів до системи.
    - Створити сценарії тестування, де користувачі одночасно редагують та отримують дані артефактів.
- **Очікуваний результат**: Система повинна підтримувати певну кількість одночасних користувачів без значного зниження продуктивності або відмов.
### 2. **Стрес-тестування**:
- **Мета**: Перевірити, як система витримує екстремальні умови (навантаження понад очікувані межі).
- **Тест**:
    - Поступово збільшувати кількість запитів до системи і спостерігати, коли почнуться відмови.
    - Імітувати великі навантаження на базу даних.
- **Очікуваний результат**: Визначити точку, в якій система починає відмовляти (наприклад, збільшення затримки або повний збій).
### 3. **Тестування пулу підключень**:
- **Мета**: Перевірити, як система керує пулом підключень для бази даних і зовнішніх сервісів.
- **Тест**:
    - Створити навантаження, яке викликає багато одночасних запитів до бази даних або API.
    - Виміряти, як система керує пулом підключень і чи виникають блокування.
- **Очікуваний результат**: Система повинна ефективно керувати пулом підключень без відмов.
### 4. **Тестування відмов зовнішніх API**:
- **Мета**: Перевірити стійкість системи в разі відмови або недоступності зовнішніх API.
- **Тест**:
    - Імітувати недоступність або затримку відповіді зовнішніх API.
    - Перевірити, як система обробляє ці умови: чи зберігає дані, чи відкочує транзакції.
- **Очікуваний результат**: Система повинна коректно обробляти відмови API, повідомляючи користувача про помилки без зависання або збою.
---

## Документація протоколів тестів
### Приклад протоколу тесту:
| **Тест**                         | **Опис**                                         | **Очікуваний результат**                                 | **Результат**     |
|----------------------------------|-------------------------------------------------|---------------------------------------------------------|-------------------|
| Тест навантаження для артефактів | Одночасне редагування 100 артефактів              | Система обробляє всі запити без відмов, мінімальні затримки | Успіх / Відмова    |
| Стрес-тест для бази даних        | Збільшити кількість одночасних запитів до 500     | Час обробки запитів не перевищує заданий поріг           | Успіх / Відмова    |
| Відмова зовнішніх API            | Імітувати недоступність API                      | Система коректно обробляє відмови, без заморожування     | Успіх / Відмова    |
### Пояснення рішень:
- Якщо система не може обробити запити в межах визначеного часу (наприклад, більше 2 секунд), потрібно оптимізувати обробку запитів до бази даних або управління пулом підключень.
- У разі відмов зовнішніх API, система повинна або використовувати кешовані дані, або інформувати користувача про тимчасову недоступність сервісу.
---

## Висновок
Дотримуючись цього плану, можна оцінити стабільність системи при високому навантаженні та забезпечити її надійність при одночасному використанні багатьма користувачами. Тестування дозволить виявити потенційні вузькі місця і підвищити стійкість системи.

